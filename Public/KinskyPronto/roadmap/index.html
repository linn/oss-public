<html>
<head>
<title>Kinsky Pronto Roadmap</title>
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"/>
<link rel="shortcut icon" href="http://www.rikwatson.com/favicon.ico" type="image/x-icon" />
<link rel="icon" href="http://www.rikwatson.com/favicon.ico" type="image/x-icon" />
<style type="text/css" media="screen">@import "_css/header.css";</style>
<style type="text/css">
<!--
body {

  margin: 0;
  font-family: "Tahoma";	
	
    overflow-x: hidden;
    -webkit-user-select: none;
    -webkit-text-size-adjust: none;
    
}

.unimplemented {
	COLOR: #999
}

.bug {
	COLOR: red
}

.heading {
  line-height: 0.75em;
  margin: 0px 0px 0px 0px;
  padding: 0px 0px 0px 0px;
  text-align: center;
  font-weight: bold;
  background-color:  #416779; /* #408080; */
  font-size:400%;
  color:white;
}

.content {
  margin: 5px 5px 5px 5px;
  padding: 5px 5px 5px 5px;
}

-->
</style>


<script type="text/javascript">
function loaded(){

   window.scrollTo(0,1);
};
</script>

</head>
<body onload="loaded()">

<div class="heading">
<br/>Kinsky Pronto Roadmap
</div>

<div class="content">


<h1>
Road Map
</h1>
<p>
This page outlines proposed new features for future releases of Kinsky Pronto. It's aim is to be a discussion document
to allow Linn Products to prioritise new features and enhancements.
</p>
<p>
If you have a feature which you would like to see in Kinsky Pronto which is not listed here then please email
<a href="mailto:rik@plancd.com">us</a>.
</p>
<h2>V3.2.1</h2>
<p>
This is current shipping release of Kinsky Pronto. And features not in this release with be in <span class=unimplemented>grey</span>,
any know bugs will be in <span class=bug>red</span>.
</p>

<p>
Features have been split into internal, under-the-hood changes, and UI enhancements
</p>

<h2>Internal</h2>
<ul>
<li class=bug>Recovery from power save often fails to reconnect cleanly<br>
(GD has done some investigation and knows what to do to fix this using the new Pronto events)</li>
<li class=unimplemented>Sort XML Processing Out</li>
<li class=unimplemented>Better startup processing for IP checking etc<br/>
Should make use of the Pronto's new ability to create alert boxes to let the end user know that we can't contact DS / Media Server.
</li>
<li class=unimplemented>Rewrite Media Server access<br/>
Although this started out as nice MVC modules, it isn't now. We need to abscract out the functionality we need from the media server.
This would help with some of the proposed UI changes outlines below.
</li>
<li class=unimplemented>Merge Konductor's Playlist code<br/>
Konductor has a much better absctracted view of the Playlist, although we couldn't do a straight code replacement we
could use it's ideas (Albums or tracks etc).
</li>
<li class=unimplemented>SSDP / UDP<br/>
Do we want to add this? I'm thinking now but the Pronto does now support UDP sockets so it's a possibility.<br>
Don't think so - Pronto is heavily tied to single room due to its 'Activities' concept, and the startup time which this would add to the individual apps (Playlist, Radio, Playlist, Embedded) would be unacceptable</li>
</ul>
<li class=unimplemented>Mute toggle (rather than mute on) in linnControl - reqs subscriptions as done for lipsync</li>
<li class=unimplemented>More speedups - notable are is playlist page</li>

<h2>UI</h2>
<ul>
<li class=bug>Better Support for UTF-8 Characters (e.g. Björk, not Bj__rk)</li>
<li class=bug>Allow for lists longer than 250 entries (either internally page this, or reduce amount of data stored in memory to minimum reqd - as using DIDL suspect may be large savings here which would permit lists of several thousand entries)</li>
<li class=bug>Extra blank page displayed for lists when number of entries in list exact multiple of page length</li>
<li class=unimplemented>Scroll Wheel - enough said</li>
<li class=unimplemented>Library browsing - up level should return to last viewed entry, not start of list</li>
<li class=unimplemented>Improved top line 'status bar'</br>
This is 60px high &amp; doesn't hold much of interest, we could put current track, play state, album art &amp; volume into the space
quite easily (at least on the 9600, would need to be selective on the 9400). Much more useful than the data &amp; time!
<img src="Status Bar.png"><br/>
For the 9400 I've moved the toolbox 'cog' to the bottom (Not sure we even need it) &amp; the cover
art overflows into to list view - which shouldn't be a problem as I can make the layers above transparent.<br/>
<img src="9400 status bar top.png"><br/>&nbsp;<br/>
<img src="9400 status bar bottom.png">
</li>
<li class=unimplemented>Improved Media Server (Library) view</br>
Should have different views depending on if we are looking at an album or not.
</li>
<li class=unimplemented>Album Art in library view - could work if we only show 4-6 covers at a time &amp; implement so default image
prior to showing graphics to reduce network bandwith when scrolling through lots of albums (see Squeezebox Duet controller for example of how to handle this).</li>
<li class=unimplemented>Album Art in Playlist view - need to be combined with track to album merging below.</li>
<li class=unimplemented>Track to album merging - thinking Konductor here. One view would show all the albums, when you select the album you get to see the
tracks (With album summary at the top).</li>
<li class=unimplemented>Splash screens for individual apps to mask initial loading time</li>
<li class=unimplemented>Preamp only - big volume bar in middle of display</li>
<li class=unimplemented>Add 'buffering' display when state is buffering (on stop/play icon ?)</li>
<li class=unimplemented>Radio channels list - spkr icon beside currently selected</li>
<li class=unimplemented>Display cover art in info space at base of playlist page</li>
<li class=unimplemented>Selection of radio station using touch-screen icon<li>
<li class=unimplemented>Selection of album/artist etc. using touch-screen icon<li>
<li class=unimplemented>&hellip;</li>
<li class=unimplemented>Different font - speak to JoshH.</li>
<li class=unimplemented>Smaller or non-bold fonts in list</li>
<li class=unimplemented>Use of scroll wheel, line at a time?</li>
</ul>



</div> <!-- content -->

<pre>
Common Header for all pages.

E4X

Put roadmap HTML on svn site. 
 
activity.js have a timer every 10th second for 5 seconds to show activity. 

Have a delta time if > 5 sec from base then hide but if we create dynamically so what about deletion and multiple instances? Could always just extend the timer adhausium. 

Progress indicator over Settings.png cog. 

Philips Pronto TSW9500 - In Wall Pronto

Usage Video http://www.youtube.com/watch?v=b9Laduo_9Oc
</pre>

<h2>Control of Systems</h2>
Where Pronto is used with Linn (or 3rd party) preamp it makes more sense to offer full control of the preamp from the device, rather than just proxied volume and source switching controls. This would eliminate need for other controller for preamp, which is what integrated solutions is all about. Hence development of RS232 drivers for Linn equipment should be prioritised



<h2>Code Notes</h2>

<p>
What we MUST understand is that in the Pronto Operating system, a real socket is mapped into the javascript space. When you set a javascript socket reference to null,
that only frees the javascript object and makes it available for garbage collection.
It does NOT automatically close the socket.
The same thing occurs whenever you assign a new TCPSocket() to a variable. The old javascript representation of the real socket object is now eligible for garbage collection but the back-end socket is still open. 
</p>
<p>

Therefore, to make all this work, you MUST figure out from the data stream when you can be done with a socket and then issue a close() call. To make things a bit easier, you can also reference the 'connected' member field to see if a close is really needed.
</p>
<p>

For example:
</p>

<pre>
if (socket && socket.connected) {
  try {
    socket.close();
  } catch (e) {
    Diagnostics.log('close error! e: ' + e);
  } finally {
    socket = null;
  };
};
</pre>

<h3>How to automatically reconnect after onTimeout/onError/onClose?</h3>
<p>

Using the onTimeout, onError and onClose callback functions it is always possible to re-send the command if the first time failed. 
These callback functions will typically try to reestablish the conection whereafter the onConnect callback will resend the command.
</p>
<p>
e.g.:
</p>
<pre>

function reInitSocket() {
   socket = new TCPSocket();
   socket.onConnect = onConnect;
   socket.onData = onData;
   socket.onClose = onClose;
   socket.onIOError = onIOError;
   socket.connect(IPAddress, Port, Timeout);
};

function onTimeout(){
   reInitSocket();
};
</pre>


<h3>Can I reconnect to an existing socket?</h3>
<p>
The answer is no.
</p>
<p>
Reusing a TCPSocket is not implemented. Always create a new socket after a close:
</p>

<pre>
function reInitSocket() {
   socket = new TCPSocket();
   socket.onConnect = onConnect;
   socket.onData = onData;
   socket.onClose = onClose;
   socket.onIOError = onIOError;
   socket.connect(IPAddress, Port);
};

.....

if (socket.connected === true){
   socket.write(...
} else {
   reInitSocket();
};
</pre>

<h3>Graphics on the fly</h3>
<p>
Along the lines of:
</p>
<pre>
var w;
w = GUI.addButton();
w.setColor(0x000000, 0); /* Black */
w.setBgColor(0x701919, 0); /* Midnight Blue */
w.setColor(0x000000, 1); /* Black */
w.setBgColor(0x00a5ff, 1); /* Orange */
w.left = 10;
w.top = 100;
w.width = 80;
w.height = 30;
w.fontSize = 20;
w.label = "Go!";
w.visible = true;

....

w.remove();

...

To be added to activity.js

Set a timer & remove after 5 seconds.
</pre>
</body>
</html>